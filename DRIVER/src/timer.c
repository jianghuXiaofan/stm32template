#include "timer.h"

__IO uint32_t TimingDelay; 

void SysTick_Init(void)
{
	//配置Systick重载值，系统时钟72MHz， 72*(1/720000000) = 1us
	if(SysTick_Config(72))
	{
		while(1);
	}
	/**
	或者写成
	while(Systick_Config(72000) == 1 );
	*/
}


void TimingDelay_Decrement(void)
{
	if (TimingDelay != 0x00)
	{
		TimingDelay--;
	}
}


//滴答中断处理
void SysTick_Handler(void)
{
	TimingDelay_Decrement();
}


//延时us
void delay_us(__IO uint32_t nTime)
{
	TimingDelay = nTime;//时钟滴答
	while( TimingDelay != 0 );
}


//延时ms
void delay_ms(__IO uint32_t nTime)
{
	delay_us(nTime * 1000);	//延时1ms
}

